
<app-operation-edit (newOperation)="addOperation($event)"></app-operation-edit>
<br>

<h1>Operations</h1>
<table class="mat-table" *ngIf="request.necessaryOperations; else noOperations">
  <thead>
  <tr class="mat-header-row">
    <th class="mat-header-cell"></th>
    <th class="mat-header-cell">ID</th>
    <th class="mat-header-cell">Name</th>
    <th class="mat-header-cell">Price</th>
    <th class="mat-header-cell">Spare part name</th>
    <th class="mat-header-cell">Car Brand</th>
    <th class="mat-header-cell">Car model</th>
    <th class="mat-header-cell">Spare part price</th>
  </tr>
  </thead>
  <tbody>
  <tr class="mat-row" *ngFor="let operation of request.necessaryOperations">
    <mat-checkbox class="example-margin" [checked]="check[request.necessaryOperations.indexOf(operation)]" (change)="Check(operation)"></mat-checkbox>
    <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.id}}</td>
    <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.typeOperation.name}}</td>
    <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.typeOperation.price}}</td>
    <ng-container *ngIf="operation.sparePart">
      <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.sparePart.name}}</td>
      <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.sparePart.carBrand}}</td>
      <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.sparePart.carModel}}</td>
      <td class="mat-cell" routerLink="/Operation/{{operation.id}}">{{operation.sparePart.price}}</td>
    </ng-container>
  </tr>
  </tbody>
</table>

<ng-template #noOperations>
  <p>no operations</p>
</ng-template>

<br>
<button (click)="DeleteOperation()">Delete operation</button>

<button (click)="Submit()">Send request</button>

<div *ngIf="showServices">
  <h3>Choose service for your request</h3>

  <table class="mat-table">
    <thead>
    <tr class="mat-header-row">
      <th class="mat-header-cell">address</th>
    </tr>
    </thead>
    <tbody>
    <tr class="mat-row" *ngFor="let carService of carServices">
      <mat-checkbox class="example-margin" [checked]="checkService[carServices.indexOf(carService)]" (change)="CheckService(carService)"></mat-checkbox>
      <td class="mat-cell">{{carService.address}}</td>
    </tr>
    </tbody>
  </table>

  <ng-template #noServices>
    <p>Sorry, there are no services that can help you. You can change your request for getting list services</p>
  </ng-template>

  <!-- <button (click)="SendRequestToService()"></button> -->
</div>
